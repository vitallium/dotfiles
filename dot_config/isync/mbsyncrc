Create Both
Expunge Both
SyncState *

# Gmail
IMAPAccount gitlab
Host imap.gmail.com
User vslobodin@gitlab.com
PassCmd "gpg2 -q --for-your-eyes-only --no-tty -d ~/.local/share/credentials/gitlab-mbsync.gpg"
SSLType IMAPS
CertificateFile /etc/ssl/certs/ca-certificates.crt

IMAPStore gmail-remote
Account gitlab

MaildirStore gmail-local
Path ~/.mail/gitlab/
Inbox ~/.mail/gitlab/Inbox
SubFolders Legacy

Channel gmail-inbox
Far :gmail-remote:
Near :gmail-local:Inbox

Channel gmail-drafts
Far :gmail-remote:"[Gmail]/Drafts"
Near :gmail-local:Drafts

Channel gmail-sent
Far :gmail-remote:"[Gmail]/Sent Mail"
Near :gmail-local:Sent

Channel gmail-all
Far :gmail-remote:"[Gmail]/All Mail"
Near :gmail-local:All

Channel gmail-trash
Far :gmail-remote:"[Gmail]/Trash"
Near :gmail-local:Trash

Group gitlab
Channel gmail-inbox
Channel gmail-drafts
Channel gmail-sent
Channel gmail-all
Channel gmail-thrash

# Personal
IMAPAccount fastmail
Host imap.fastmail.com
Port 993
User vitaly_slobodin@fastmail.com
PassCmd "gpg2 -q --for-your-eyes-only --no-tty -d ~/.local/share/credentials/fastmail-mbsync.gpg"
SSLType IMAPS
SSLVersions TLSv1.2
CertificateFile /etc/ssl/certs/ca-certificates.crt

IMAPStore fastmail-remote
Account fastmail

MaildirStore fastmail-local
Path ~/.mail/fastmail/
Inbox ~/.mail/fastmail/Inbox
# The SubFolders option allows to represent all
# IMAP subfolders as local subfolders
SubFolders Verbatim

# This section a "channel", a connection between remote and local
Channel fastmail
Far :fastmail-remote:
Near :fastmail-local:
Patterns *
CopyArrivalDate yes
