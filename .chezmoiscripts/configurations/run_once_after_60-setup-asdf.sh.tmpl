#!/usr/bin/env sh

# ask sudo upfront
sudo -v

set -eufo pipefail

# Ruby
sudo dnf install -y gcc make bzip2 openssl-devel \
                    libyaml-devel libffi-devel readline-devel \
                    zlib-devel gdbm-devel ncurses-devel \
                    libcurl-devel uuid-devel libuuid-devel \
                    sqlite sqlite-devel tk-devel xz-devel \
                    m4 ncurses-devel autoconf

# TODO: Instead of deleting the asdf we need to check if the directory exists and update asdf version
rm -rf ~/.asdf
git clone https://github.com/asdf-vm/asdf.git ~/.asdf --branch v0.10.0

# reload shell before installing asdf plugins
source $HOME/.asdf/asdf.sh

asdf plugin add ruby
asdf plugin add nodejs
asdf plugin add yarn
asdf plugin add erlang
asdf plugin add elixir
asdf plugin add python
asdf plugin add direnv

asdf install direnv latest
